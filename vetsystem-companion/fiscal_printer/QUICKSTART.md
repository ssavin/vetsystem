# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ü–µ—á–∞—Ç—å —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

### 1. Backend (Python)
- ‚úÖ `fiscal_printer/printer.py` - –º–æ–¥—É–ª—å –ø–µ—á–∞—Ç–∏ –¥–ª—è Vikiprint 57 –∏ ATOL 30F
- ‚úÖ `fiscal_printer/requirements.txt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- ‚úÖ `fiscal_printer/README.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 2. Electron Main Process
- ‚úÖ IPC handlers –≤ `src/main/index.ts`:
  - `printer:print-receipt` - –ø–µ—á–∞—Ç—å —á–µ–∫–∞
  - `printer:test-connection` - —Ç–µ—Å—Ç –ø–æ—Ä—Ç–∞
  - `printer:list-ports` - —Å–ø–∏—Å–æ–∫ COM-–ø–æ—Ä—Ç–æ–≤
- ‚úÖ Preload API –≤ `src/main/preload.ts`

### 3. UI (React)
- ‚úÖ `PrinterSettingsPage.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç `/printer-settings` –≤ App.tsx
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è "üñ®Ô∏è –ü—Ä–∏–Ω—Ç–µ—Ä" –≤ Sidebar
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üñ®Ô∏è –ü–µ—á–∞—Ç—å" –≤ InvoicesPage

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Windows

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python
python --version

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pyserial
pip install pyserial

# –ò–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt
cd vetsystem-companion/fiscal_printer
pip install -r requirements.txt
```

### –ï—Å–ª–∏ Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

1. –°–∫–∞—á–∞–π—Ç–µ Python: https://www.python.org/downloads/
2. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ ‚úÖ –≤–∫–ª—é—á–∏—Ç–µ "Add Python to PATH"
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pyserial: `pip install pyserial`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ Companion –≤ dev —Ä–µ–∂–∏–º–µ

```bash
cd vetsystem-companion
npm run dev
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è Electron –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–Ω—Ç–µ—Ä–∞

1. –í Companion ‚Üí **üñ®Ô∏è –ü—Ä–∏–Ω—Ç–µ—Ä**
2. –í—ã–±–µ—Ä–∏—Ç–µ **–º–æ–¥–µ–ª—å –ø—Ä–∏–Ω—Ç–µ—Ä–∞** (Vikiprint 57 –∏–ª–∏ ATOL 30F)
3. –ù–∞–∂–º–∏—Ç–µ **üîÑ –û–±–Ω–æ–≤–∏—Ç—å** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –ø–æ—Ä—Ç–æ–≤
4. –í—ã–±–µ—Ä–∏—Ç–µ **COM-–ø–æ—Ä—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, COM3)
5. –ù–∞–∂–º–∏—Ç–µ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
6. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ ‚Üí **‚úì –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

### 3. –ü–µ—á–∞—Ç—å —á–µ–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **üí∞ –°—á–µ—Ç–∞**
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å—á–µ—Ç (–µ—Å–ª–∏ –Ω–µ—Ç)
3. –ù–∞–∂–º–∏—Ç–µ **üñ®Ô∏è –ü–µ—á–∞—Ç—å** –Ω–∞ –ª—é–±–æ–º —Å—á–µ—Ç–µ
4. –ß–µ–∫ –¥–æ–ª–∂–µ–Ω –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å—Å—è

### 4. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Python –º–æ–¥—É–ª—è

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd vetsystem-companion/fiscal_printer

# –¢–µ—Å—Ç Vikiprint
python printer.py vikiprint COM3 '{"items":[{"name":"–¢–µ—Å—Ç","price":100,"quantity":1}],"payment_method":"cash","total":100}'

# –¢–µ—Å—Ç ATOL
python printer.py atol COM3 '{"items":[{"name":"–¢–µ—Å—Ç","price":100,"quantity":1}],"payment_method":"cash","total":100}'
```

–ó–∞–º–µ–Ω–∏—Ç–µ `COM3` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π COM-–ø–æ—Ä—Ç.

---

## üì¶ –°–±–æ—Ä–∫–∞ production –≤–µ—Ä—Å–∏–∏

```bash
cd vetsystem-companion

# –°–±–æ—Ä–∫–∞ –¥–ª—è Windows
npm run build:win

# –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –±—É–¥–µ—Ç –≤: dist/VetSystem Companion Setup.exe
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "python –Ω–µ –Ω–∞–π–¥–µ–Ω"

**Windows:**
```bash
# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ
py --version

# –ò–ª–∏
python3 --version

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
```

### –û—à–∏–±–∫–∞: "No module named 'serial'"

```bash
pip install pyserial
```

### –û—à–∏–±–∫–∞: "–ü–æ—Ä—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" / "Access denied"

1. –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ø–æ—Ä—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –≤ –î–∏—Å–ø–µ—Ç—á–µ—Ä–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Companion **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–Ω—Ç–µ—Ä –≤–∫–ª—é—á–µ–Ω

### –ü–µ—á–∞—Ç–∞–µ—Ç—Å—è –º—É—Å–æ—Ä –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ (Vikiprint/ATOL)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∏–∑–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –≤ `printer.py` (baudrate=9600)

### COM-–ø–æ—Ä—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ **–î–∏—Å–ø–µ—Ç—á–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤** ‚Üí **–ü–æ—Ä—Ç—ã (COM –∏ LPT)**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –¥—Ä–∞–π–≤–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
3. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ USB-–∫–∞–±–µ–ª—å
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Companion (F5 –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ)

---

## üìù –¢–µ—Å—Ç–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] Python —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] pyserial —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`pip install pyserial`)
- [ ] –ü—Ä–∏–Ω—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ USB
- [ ] –î—Ä–∞–π–≤–µ—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] COM-–ø–æ—Ä—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –î–∏—Å–ø–µ—Ç—á–µ—Ä–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] Companion –∑–∞–ø—É—â–µ–Ω
- [ ] –ú–æ–¥–µ–ª—å –ø—Ä–∏–Ω—Ç–µ—Ä–∞ –≤—ã–±—Ä–∞–Ω–∞
- [ ] COM-–ø–æ—Ä—Ç –≤—ã–±—Ä–∞–Ω
- [ ] –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å–ø–µ—à–µ–Ω
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å—á–µ—Ç —Å–æ–∑–¥–∞–Ω
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–µ—á–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ß–µ–∫ —É—Å–ø–µ—à–Ω–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–≠—Ç–æ **–±–∞–∑–æ–≤–∞—è –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è** –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:
- ‚úÖ –ü–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —á–µ–∫–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã (CP866)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏ —Å—É–º–º–µ

### –î–ª—è production-—Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è

- **–§–∏—Å–∫–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å** –≤ –ø—Ä–∏–Ω—Ç–µ—Ä–µ
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –§–ù–°** (–§–µ–¥–µ—Ä–∞–ª—å–Ω–∞—è –Ω–∞–ª–æ–≥–æ–≤–∞—è —Å–ª—É–∂–±–∞)
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –û–§–î** (–û–ø–µ—Ä–∞—Ç–æ—Ä —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- **–ü–æ–ª–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è (ATOL KKT / VikiDriver)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ù–î–°, —Å–∫–∏–¥–∫–∏, –∫–æ–¥—ã —Ç–æ–≤–∞—Ä–æ–≤)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

–í –æ—Å–Ω–æ–≤–Ω–æ–º VetSystem —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Dreamkas** (–ø–æ–ª–Ω–∞—è —Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å –û–§–î). –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ñ–∏—Å–∫–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏ Companion (F12)
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python** –≤—Ä—É—á–Ω—É—é: `python fiscal_printer/printer.py ...`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ COM-–ø–æ—Ä—Ç** –≤ –î–∏—Å–ø–µ—Ç—á–µ—Ä–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã** –ø—Ä–∏–Ω—Ç–µ—Ä–∞

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `fiscal_printer/README.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `fiscal_printer/SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—á–∞—Ç–∏ —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤ —á–µ—Ä–µ–∑ COM-–ø–æ—Ä—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
